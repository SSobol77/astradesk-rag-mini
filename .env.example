# AstraDesk RAG Mini - Environment Variables Configuration
# Copy this file to .env and configure your values

# ============================================
# OpenAI Configuration
# ============================================
# Required for production use with OpenAI embeddings and chat
OPENAI_API_KEY=sk-your-openai-api-key-here

# ============================================
# Database Configuration
# ============================================
# PostgreSQL connection settings
SPRING_DATASOURCE_URL=jdbc:postgresql://localhost:5432/rag
SPRING_DATASOURCE_USERNAME=rag
SPRING_DATASOURCE_PASSWORD=rag

# ============================================
# S3/MinIO Configuration
# ============================================
# Object storage for document files
S3_ENDPOINT=http://localhost:9000
S3_REGION=us-east-1
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_BUCKET=astradesk-rag

# ============================================
# RAG API Security
# ============================================
# Optional: Set to enable API key authentication
# If not set, endpoints are publicly accessible
RAG_API_KEY=

# ============================================
# CORS Configuration
# ============================================
# Comma-separated list of allowed origins for CORS
RAG_CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080

# ============================================
# Application Settings
# ============================================
# Server port
SERVER_PORT=8080

# File upload limits (default: 100MB)
SPRING_SERVLET_MULTIPART_MAX_FILE_SIZE=100MB
SPRING_SERVLET_MULTIPART_MAX_REQUEST_SIZE=100MB

# ============================================
# RAG Provider Configuration
# ============================================
# Embeddings provider: springai | openai | fake
RAG_PROVIDER_EMBEDDINGS=springai

# Chat provider: springai | openai | fake
RAG_PROVIDER_CHAT=springai

# Embedding dimension (1536 for text-embedding-3-small)
RAG_EMBEDDING_DIM=1536

# Default number of results to return
RAG_TOPK=5

# Chunking configuration
RAG_CHUNK_MAXLEN=1200
RAG_CHUNK_OVERLAP=200

# ============================================
# Database Connection Pool (HikariCP)
# ============================================
SPRING_DATASOURCE_HIKARI_MAXIMUM_POOL_SIZE=10
SPRING_DATASOURCE_HIKARI_MINIMUM_IDLE=2
SPRING_DATASOURCE_HIKARI_CONNECTION_TIMEOUT=30000
SPRING_DATASOURCE_HIKARI_IDLE_TIMEOUT=600000
SPRING_DATASOURCE_HIKARI_MAX_LIFETIME=1800000

# ============================================
# Monitoring & Metrics
# ============================================
# Actuator endpoints (health, metrics, prometheus)
MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=health,metrics,prometheus
MANAGEMENT_METRICS_EXPORT_PROMETHEUS_ENABLED=true

# OpenTelemetry tracing
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318/v1/traces
MANAGEMENT_TRACING_SAMPLING_PROBABILITY=1.0

# ============================================
# Rate Limiting
# ============================================
# Enable rate limiting per API key
RAG_RATE_LIMIT_ENABLED=false
RAG_RATE_LIMIT_RPM=60

# ============================================
# Logging Configuration
# ============================================
# Log level: TRACE, DEBUG, INFO, WARN, ERROR
LOGGING_LEVEL_COM_ASTRADESK_RAG=INFO
LOGGING_LEVEL_ORG_SPRINGFRAMEWORK=WARN
